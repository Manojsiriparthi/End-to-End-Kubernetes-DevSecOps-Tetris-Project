{"ast":null,"code":"import React,{useState,useEffect}from'react';import Next from\"./Next.js\";import Score from\"./Score.js\";import Level from\"./Level.js\";import{createMatrix}from\"../helpers/Helpers\";import styles from\"./Game.module.css\";import{emptyPiece}from\"../tetris/Piece\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const Game=_ref=>{let{tetris}=_ref;const[state,setState]=useState(tetris.state||{});useEffect(()=>{const handleStateChange=_state=>{console.log(\"State updated:\",_state);// Debugging line\nsetState(_state);};tetris.onStateChange(handleStateChange);return()=>tetris.offStateChange(handleStateChange);},[tetris]);const isStarted=state.isStarted&&state.isStarted();const isRunning=state.isRunning&&state.isRunning();console.log(\"isStarted:\",isStarted,\"isRunning:\",isRunning);// Debugging line\nconst visibleMatrix=state.visibleMatrix?createMatrix(state.visibleMatrix(),styles):null;const nextPiece=state.nextPiece?state.nextPiece():emptyPiece();const score=state.score?state.score():0;const level=state.level?state.level():0;return/*#__PURE__*/_jsxs(\"div\",{className:styles.content,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.header,children:\"React Tetris\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.matrix,children:[visibleMatrix,state.isGameOver&&state.isGameOver()&&/*#__PURE__*/_jsx(\"div\",{className:styles.gameOver,children:/*#__PURE__*/_jsx(\"p\",{children:\"Game Over\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.controls,children:[/*#__PURE__*/_jsx(Next,{next:nextPiece}),/*#__PURE__*/_jsx(Score,{score:score}),/*#__PURE__*/_jsx(Level,{level:level}),/*#__PURE__*/_jsxs(\"div\",{className:styles.controlsButtons,children:[/*#__PURE__*/_jsx(\"button\",{onClick:tetris.start,className:`${styles.btn} ${styles.btnNew}`,children:\"New Game\"}),isStarted&&/*#__PURE__*/_jsx(\"button\",{onClick:isRunning?tetris.pause:tetris.resume,className:`${styles.btn} ${isRunning?styles.btnPause:styles.btnNew}`,children:isRunning?'Pause':'Resume'})]})]})]});};export default Game;","map":{"version":3,"names":["React","useState","useEffect","Next","Score","Level","createMatrix","styles","emptyPiece","jsx","_jsx","jsxs","_jsxs","Game","_ref","tetris","state","setState","handleStateChange","_state","console","log","onStateChange","offStateChange","isStarted","isRunning","visibleMatrix","nextPiece","score","level","className","content","children","header","matrix","isGameOver","gameOver","controls","next","controlsButtons","onClick","start","btn","btnNew","pause","resume","btnPause"],"sources":["/root/End-to-End-Kubernetes-DevSecOps-Tetris-Project/Tetris-V1/src/components/Game.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport Next from \"./Next.js\";\nimport Score from \"./Score.js\";\nimport Level from \"./Level.js\";\nimport { createMatrix } from \"../helpers/Helpers\";\nimport styles from \"./Game.module.css\";\nimport { emptyPiece } from \"../tetris/Piece\";\n\nexport const Game = ({ tetris }) => {\n    const [state, setState] = useState(tetris.state || {});\n\n    useEffect(() => {\n        const handleStateChange = (_state) => {\n            console.log(\"State updated:\", _state); // Debugging line\n            setState(_state);\n        };\n        tetris.onStateChange(handleStateChange);\n        return () => tetris.offStateChange(handleStateChange);\n    }, [tetris]);\n\n    const isStarted = state.isStarted && state.isStarted();\n    const isRunning = state.isRunning && state.isRunning();\n    console.log(\"isStarted:\", isStarted, \"isRunning:\", isRunning); // Debugging line\n\n    const visibleMatrix = state.visibleMatrix ? createMatrix(state.visibleMatrix(), styles) : null;\n    const nextPiece = state.nextPiece ? state.nextPiece() : emptyPiece();\n    const score = state.score ? state.score() : 0;\n    const level = state.level ? state.level() : 0;\n\n    return (\n        <div className={styles.content}>\n            <div className={styles.header}>React Tetris</div>\n            <div className={styles.matrix}>\n                {visibleMatrix}\n                {state.isGameOver && state.isGameOver() && <div className={styles.gameOver}><p>Game Over</p></div>}\n            </div>\n            <div className={styles.controls}>\n                <Next next={nextPiece} />\n                <Score score={score} />\n                <Level level={level} />\n                <div className={styles.controlsButtons}>\n                    <button onClick={tetris.start} className={`${styles.btn} ${styles.btnNew}`}>New Game</button>\n                    {isStarted && (\n                        <button\n                            onClick={isRunning ? tetris.pause : tetris.resume}\n                            className={`${styles.btn} ${isRunning ? styles.btnPause : styles.btnNew}`}\n                        >\n                            {isRunning ? 'Pause' : 'Resume'}\n                        </button>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nGame.propTypes = {\n    tetris: PropTypes.shape({\n        state: PropTypes.object,\n        onStateChange: PropTypes.func.isRequired,\n        offStateChange: PropTypes.func,\n        start: PropTypes.func.isRequired,\n        pause: PropTypes.func,\n        resume: PropTypes.func\n    }).isRequired\n};\n\nexport default Game;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}